### 进程管理
#### 进程的状态  
这里的时间片到应该是时间片用完的意思  
挂起是人为的  
<img src="os_state.png" style="width:600px;">  

#### 前驱图  
#### pv操作  
s的值为负数时，表示等待的进程数
```
p:
s=s-1
if(s<0){
    放入等待队列
} else {
    继续执行
}
v:
s=s+1
if(s<=0>){
    释放一个等待进程
}
```
#### 死锁问题
- 死锁的四大条件：互斥、保持和等待、不剥夺、环路等待
- 死锁的预防：打破四大条件
- 死锁的避免：有序资源分配法、银行家算法

### 存储管理
- (内存)分区存储组织：首次适应、最佳适应、最差适应、循环首次适应
- 高级程序设计语言使用逻辑地址；运行状态，内存中使用物理地址
- 段页式存储
    - 页式存储：用页表记录用户程序的页和内存的块之间的对应关系，优点：利用率高；缺点：增加了系统开销，可能产生抖动  
    通过逻辑地址求物理地址：逻辑地址为页号+页内偏移；物理地址为块号和块内偏移；页内地址是一样的；通过页号去查找块号，把两部分拼接；物理地址=块号*页大小+偏移量，物理块号又叫页帧号
    - 段式存储：段是按逻辑结构划分的，段可以不一样，优点：多道程序共享内存，缺点，内存利用率低，碎片浪费大。  
    段表记录了段长和在内存空间中的基址。
    - 段页式存储：先分段，再分页。
    - 块表：
- 页面置换算法：
    - 最优（OPT）算法：逻辑概念，不是具体的算法
    - 随机（RAND)算法
    - 先进先出(FIFO)算法：可能产生抖动
    - 最近最少用（LRU）算法：不会抖动
- 指令一次读入，即使跨页，也不产生缺页中断
### 文件管理
- 逻辑块和物理块： 逻辑块是从0开始编号的，而且，逻辑块是连续的。与逻辑块相对的是物理块，物理块是数据在磁盘上的存取单位，也就是每进行一次I/O操作，最小传输的数据大小。
- 索引文件：一般13个结点，0-9直接索引，存物理盘块，容量为块大小\*10，
10一级间接索引，存物理盘块，容量为块大小\*1024<sup>n</sup>，11二级间接索引，12三级间接索引
- 文件和树型目录结构：
    - 文件属性：R只读，A存档，S系统，H隐藏
- 空闲存储空间的管理：
    - 空闲区表：用一个表来记录哪些地方空闲
    - 空闲链表：把空闲区都链成链表
    - 位示图：注意多少位置0开始，第~从1开始
    - 成组链表：分组也分链
### 作业管理
### 设备管理
- 数据传输控制方式：
    - 程序控制方式
    - 程序中断方式
    - DMA方式
    - 通道
    - 输入输出处理机
- 虚设备与spooling技术：开辟输入输出缓冲区
### 微内核操作系统
分用户态和核心态