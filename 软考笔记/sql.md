### 三级模式，两级映射
内模式：数据的存放，物理级数据库  
概念模式：数据库表，概念级数据库  
外模式：数据库视图（视图是从一个或几个基本表（或视图）中导出的虚拟的表。），用户级数据库  
### 数据库设计过程
- 需求分析
- 概念结构设计:ER模型
- 逻辑结构设计:关系模式
- 物理设计
### ER模型转关系模式
一个实体转成一个关系模式,
联系有三种不同类型:
- 1:1联系：联系可以放在任何一个实体里
- 1:n联系：联系放在n端
- m:n联系:联系必须转成一个单独的实体
### 关系代数
- 并
- 交
- 差
- 笛卡尔积：从集合A选一个，再从集合B选一个，所有可能的组合
- 投影：π,选出需要的列
- 选择：σ,选出需要的行
- 联接：两个相对的三角形,根据条件连接在一起，没有写条件就是自然连接，连接方式是两个表中相同的字段等值
### 规范化理论
1，函数依赖:某个属性集决定另一个属性集时，称另一属性集依赖于该属性集。  
- 部分函数依赖：(A,B)->C且A->C
- 传递函数依赖: A->B且B->C,B不确定A，则A->C  

2，价值与用途：数据冗余、更新异常、插入异常、删除异常  
3，键：
- 超键：唯一标识元组
- 候选键：超键消除多余属性后变为候选键  
- 主键：候选键任选一个
- 外键：其他关系的主键

4，求解候选键：图示法  
将关系模式的函数依赖用有向图表示；找入度为0的属性，若以此为起点能遍历有向图，则该属性为候选键；若不能，则尝试将一些属性加入，再次遍历  
5,范式：
- 1NF：属性都是不可分的原子值
- 2NF：1NF消除非主属性对候选键的部份依赖
- 3NF：2NF消除非主属性对候选键的传递依赖
- BCNF: 3NF消除主属性对候选键的传递依赖，R属于BCNF当且仅当其F中每个依赖的决定因素必定包含R的某个候选码

5，模式分解
要求：  
保持函数依赖分解  
无损分解 无损联接分解：指将一个关系模式分解成若干个关系模式后，通过自然连接和投影等运算仍能还原到原来的关系模式  

#### 数据库并发控制
1，事务：原子性，一致性，隔离性，持续性
2，并发产生的问题：丢失更新，不可重复读，脏读
3，封锁协议：（S封锁，X封锁）/（一级二级三级封锁协议，两段封锁协议）
4，死锁
